<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to the World of Phones</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        /* Make the body take up the full screen */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url("/static/images/bag_bg.png"); /* Background image */
            overflow: hidden; /* Prevent scrollbars during animation */
            transition: background-color 1s; /* Smooth background color transition */
            background-repeat: no-repeat;
            background-size: cover;
        }

        /* Center the model-viewer and make it responsive */
        model-viewer {
            width: 100vw;  /* Make model fill the entire viewport width */
            height: 100vh; /* Make model fill the entire viewport height */
            max-width: 100%; /* Remove any max-width constraints */
            max-height: 100%; /* Remove any max-height constraints */
            transition: transform 2s ease, opacity 1s ease; /* Add opacity transition */
            pointer-events: all; /* Allow interaction with the model-viewer */
        }

        /* General button styling */
        button {
            position: absolute;
            padding: 12px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: rgba(0, 123, 255, 0.8); /* Semi-transparent blue */
            color: white;
            border: none;
            border-radius: 50px; /* Rounded buttons */
            z-index: 10; /* Ensure button is above the model-viewer */
            transition: opacity 0.5s ease, transform 0.3s ease; /* Smooth transitions */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Soft shadow for depth */
        }

        /* Button hover effect */
        button:hover {
            transform: scale(1.1); /* Slight zoom on hover */
            background-color: rgba(0, 123, 255, 1); /* Solid blue on hover */
        }

        .immerse-button {
            bottom: 20px;
        }

        .back-button {
            bottom: 20px; /* Position the Back button at the bottom */
            opacity: 0; /* Start with hidden button */
            pointer-events: none; /* Prevent clicks when hidden */
            left: 50%; /* Center horizontally */
            transform: translateX(-50%); /* Center horizontally */
        }

        .next-button, .prev-button {
            top: 50%; /* Center vertically */
            transform: translateY(-50%); /* Center vertically */
            opacity: 0;
            pointer-events: none;
        }

        .next-button {
            right: 20px;
            padding: 12px 16px;
        }

        .prev-button {
            left: 20px;
            padding: 12px 16px;
        }

        /* Use angle brackets for next and previous buttons */
        .next-button::before, .prev-button::before {
            content: '';
            font-size: 32px; /* Increase size */
            font-weight: bold;
        }

        .next-button::before {
            content: '>'; /* Next arrow */
        }

        .prev-button::before {
            content: '<'; /* Previous arrow */
        }

        /* Hidden class for button */
        .hidden {
            opacity: 0;
            pointer-events: none; /* Prevent clicks when hidden */
        }

        /* Hidden class for model-viewer */
        .disappear {
            opacity: 0; /* Fade out the model */
            pointer-events: none; /* Disable interactions */
        }

        /* Phone image styling */
        #phone-image {
            position: absolute;
            width: 80vw; /* Adjust the size of the phone image for better fit */
            max-height: 60vh; /* Maintain aspect ratio within view */
            opacity: 0; /* Start with hidden image */
            transition: opacity 1s ease, transform 1s ease; /* Smooth fade-in and scale transition */
            z-index: 5; /* Make sure it's above the model */
            object-fit: contain; /* Ensure the image fits within the container */
            pointer-events: none; /* Disable pointer events initially */
        }

        /* Title styling */
        #phone-title {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 36px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Add shadow for better visibility */
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 6;
            text-align: center;
        }

        /* Description styling */
        #phone-description {
            position: absolute;
            top: 80%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7); /* Add shadow for better visibility */
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 6;
            text-align: center;
        }
    </style>
</head>
<body>

<model-viewer id="bag-model" src="{{ url_for('static', filename='models/bagpack.glb') }}" alt="A 3D model"
              auto-rotate camera-controls interaction-prompt="auto"></model-viewer>

<button id="immerse-btn" class="immerse-button">Immerse</button>
<button id="back-btn" class="back-button">Back</button>
<button id="next-btn" class="next-button"></button>
<button id="prev-btn" class="prev-button"></button>

<!-- Phone image and text elements -->
<img id="phone-image" src="{{ url_for('static', filename='images/phone1.webp') }}" alt="Phone Image">
<div id="phone-title">Title of the Phone</div>
<div id="phone-description">Description of the Phone</div>

<script>
    // Select the model-viewer, buttons, phone image, title, and description elements
    const modelViewer = document.getElementById('bag-model');
    const immerseButton = document.getElementById('immerse-btn');
    const backButton = document.getElementById('back-btn');
    const nextButton = document.getElementById('next-btn');
    const prevButton = document.getElementById('prev-btn');
    const phoneImage = document.getElementById('phone-image');
    const phoneTitle = document.getElementById('phone-title');
    const phoneDescription = document.getElementById('phone-description');

    // Array of phone image filenames, titles, descriptions, and links
    const phones = [
        {
            src: "{{ url_for('static', filename='images/phone1.webp') }}",
            title: "Iphone 13",
            description: "64GB (Grey)",
            link: "https://www.apple.com/iphone-13/"
        },
        {
            src: "{{ url_for('static', filename='images/phone2.png') }}",
            title: "IQOO Z7 Pro 5G",
            description: "128GB (Sky Blue), 12GB RAM",
            link: "https://www.iqoo.com/in/products/z7pro"
        },
        {
            src: "{{ url_for('static', filename='images/phone3.png') }}",
            title: "Redmi 12 5G",
            description: "256GB (Aqua), 8GB RAM",
            link: "https://www.mi.com/global/product/redmi-12/"
        },
        {
            src: "{{ url_for('static', filename='images/phone5.png') }}",
            title: "Samsung Galaxy S24 Ultra 5G",
            description: "512GB (Sandal Yellow), 12GB RAM",
            link: "https://www.amazon.in/Samsung-Galaxy-Smartphone-Titanium-Storage/dp/B0CS6FDBMW/ref=pd_lpo_sccl_3/258-0080987-6575568?pd_rd_w=DKKiR&content-id=amzn1.sym.e0c8139c-1aa1-443c-af8a-145a0481f27c&pf_rd_p=e0c8139c-1aa1-443c-af8a-145a0481f27c&pf_rd_r=0ZKNY60PZ0KV8CQBA49T&pd_rd_wg=odKd2&pd_rd_r=c392c996-93e3-4d51-8ad6-45fc9bfaff19&pd_rd_i=B0CS6FDBMW&psc=1"
        },
        {
            src: "{{ url_for('static', filename='images/phone6.png') }}",
            title: "Iphone 15 Pro",
            description: "128GB (Blue)",
            link: "https://www.apple.com/iphone-15-pro/"
        },
        {
            src: "{{ url_for('static', filename='images/phone7.png') }}",
            title: "Yuva 2 Pro 5G",
            description: "128GB (White), 8GB RAM",
            link: "https://www.amazon.in/Lava-Lavender-Storage-Fingerprint-Expandable/dp/B0BVBGY6GL?th=1"
        },
        {
            src: "{{ url_for('static', filename='images/phone8.png') }}",
            title: "Oppo A18",
            description: "64GB (Brown), 4GB RAM",
            link: "https://www.oppo.com/en/smartphones/series-a/a18/"
        }
    ];

    let currentImageIndex = 0;

    // Add a click event listener to the Immerse button
    immerseButton.addEventListener('click', () => {
        // Start the zoom-in and transition effect
        modelViewer.style.transform = 'scale(6.0)'; // Zoom-in effect
        immerseButton.classList.add('hidden'); // Hide the Immerse button

        // Fade out the backpack model
        setTimeout(() => {
            modelViewer.classList.add('disappear');
            phoneImage.style.pointerEvents = 'all'; // Enable image pointer events after zoom-in
        }, 1500); // Start fading out just before displaying the phone

        // Display the phone image, title, description, and show the navigation buttons
        setTimeout(() => {
            phoneImage.style.opacity = 1; // Fade in the phone image
            phoneTitle.style.opacity = 1; // Fade in the phone title
            phoneDescription.style.opacity = 1; // Fade in the phone description
            phoneImage.style.transform = 'scale(1)'; // Reset any previous transform
            backButton.style.opacity = 1; // Show the Back button
            backButton.style.pointerEvents = 'auto'; // Enable button click
            nextButton.style.opacity = 1; // Show the Next button
            nextButton.style.pointerEvents = 'auto'; // Enable button click
            prevButton.style.opacity = 1; // Show the Previous button
            prevButton.style.pointerEvents = 'auto'; // Enable button click

            // Update title and description for the first phone
            phoneTitle.textContent = phones[currentImageIndex].title;
            phoneDescription.textContent = phones[currentImageIndex].description;
        }, 2000); // Delay to match the zoom-in transition
    });

    // Add a click event listener to the Back button
    backButton.addEventListener('click', () => {
        // Reset the view
        phoneImage.style.opacity = 0; // Hide the phone image
        phoneTitle.style.opacity = 0; // Hide the phone title
        phoneDescription.style.opacity = 0; // Hide the phone description
        phoneImage.style.transform = 'scale(0.8)'; // Shrink the image before hiding
        backButton.style.opacity = 0; // Hide the Back button
        backButton.style.pointerEvents = 'none'; // Disable button click
        nextButton.style.opacity = 0; // Hide the Next button
        nextButton.style.pointerEvents = 'none'; // Disable button click
        prevButton.style.opacity = 0; // Hide the Previous button
        prevButton.style.pointerEvents = 'none'; // Disable button click

        // Reset the model's appearance
        setTimeout(() => {
            modelViewer.classList.remove('disappear'); // Show the model again
            modelViewer.style.transform = 'scale(1)'; // Reset scale
            document.body.style.backgroundColor = '#8f9ddc'; // Reset background color
            immerseButton.classList.remove('hidden'); // Show the Immerse button again
            phoneImage.style.pointerEvents = 'none'; // Disable image pointer events when back to model
        }, 1000); // Delay to match the fade-out transition
    });

    // Add click event listeners for Next and Previous buttons
    nextButton.addEventListener('click', () => {
        currentImageIndex = (currentImageIndex + 1) % phones.length;
        phoneImage.style.opacity = 0; // Fade out current image
        phoneTitle.style.opacity = 0; // Fade out title
        phoneDescription.style.opacity = 0; // Fade out description
        setTimeout(() => {
            phoneImage.src = phones[currentImageIndex].src;
            phoneTitle.textContent = phones[currentImageIndex].title;
            phoneDescription.textContent = phones[currentImageIndex].description;
            phoneImage.style.opacity = 1; // Fade in new image
            phoneTitle.style.opacity = 1; // Fade in new title
            phoneDescription.style.opacity = 1; // Fade in new description
        }, 500); // Slight delay for smoother transition
    });

    prevButton.addEventListener('click', () => {
        currentImageIndex = (currentImageIndex - 1 + phones.length) % phones.length;
        phoneImage.style.opacity = 0; // Fade out current image
        phoneTitle.style.opacity = 0; // Fade out title
        phoneDescription.style.opacity = 0; // Fade out description
        setTimeout(() => {
            phoneImage.src = phones[currentImageIndex].src;
            phoneTitle.textContent = phones[currentImageIndex].title;
            phoneDescription.textContent = phones[currentImageIndex].description;
            phoneImage.style.opacity = 1; // Fade in new image
            phoneTitle.style.opacity = 1; // Fade in new title
            phoneDescription.style.opacity = 1; // Fade in new description
        }, 500); // Slight delay for smoother transition
    });

    // Add click event listener for phone image to redirect to the link
    phoneImage.addEventListener('click', () => {
        window.location.href = phones[currentImageIndex].link;
    });
</script>


</body>
</html>
